<!DOCTYPE html>
<html>
<head>
 <title>AI Battle Arena</title>
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <style>
 @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');

 body {
 font-family: 'Orbitron', sans-serif;
 margin: 0;
 padding: 0;
 background-color: #292929;
 color: #D35400;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 height: 100vh;
 }

 .top-bar {
 background-color: #333;
 color: #ffd700;
 padding: 20px;
 text-align: center;
 width: 100%;
 font-size: 28px;
 box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
 position: relative;
 }

 .top-bar h1 {
 margin: 0;
 }

 .top-bar img {
 max-width: 60%;
 height: auto;
 position: center;
 top: 10px;
 left: 50%;
 transform: translateX(-0%);
 }

 .main-section {
 max-width: 800px;
 margin: 20px auto;
 padding: 20px;
 background-color: #333;
 box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
 width: 90%;
 border-radius: 10px;
 overflow-y: auto;
 scrollbar-width: thin;
 scrollbar-color: #ccc #f0f0f0;
 }

 .bot-response {
 margin: 20px 0;
 padding: 20px;
 border-radius: 10px;
 width: 90%;
 box-sizing: border-box;
 font-size: 16px;
 line-height: 1.8;
 animation: fadeIn 1s;
 color: #333;
 font-family: Arial, sans-serif;
 }

 .bot1-response {
 background-color: #ffddc1;
 border: 1px solid #ccc;
 box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
 }

 .bot2-response {
 background-color: #c1ffd7;
 border: 1px solid #ccc;
 box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
 }

 #question {
 padding: 15px;
 margin-right: 10px;
 border: 1px solid #ccc;
 border-radius: 10px;
 width: 70%;
 box-sizing: border-box;
 font-size: 18px;
 color: #333;
 background-color: #fff;
 }

 button {
 padding: 15px;
 background-color: #444;
 color: #ffd700;
 border: none;
 border-radius: 10px;
 cursor: pointer;
 font-size: 18px;
 }

 .loading-indicator {
 display: none;
 font-size: 18px;
 color: #ffd700;
 }

 ::-webkit-scrollbar {
 width: 12px;
 }

 ::-webkit-scrollbar-track {
 background: #f0f0f0;
 }

 ::-webkit-scrollbar-thumb {
 background-color: #ccc;
 border-radius: 20px;
 border: 3px solid #f0f0f0;
 }
 </style>
</head>
<body>

 <div class="top-bar">
 <h1>AI Battle</h1>
 <img src="https://raw.githubusercontent.com/AiGptCode/t/main/IMG_4113.png" alt="AI Battle Logo">
 </div>
 <div class="description">Welcome to our AI Battle! Ask a question and let our two AI models battle it out.</div>
 <div class="main-section">
 <div style="display: flex; align-items: center;">
 <input type="text" id="question" placeholder="Ask a question...">
 <button onclick="askQuestion()">Ask</button>
 </div>
 <div>
 <label for="rounds">Select number of rounds:</label>
 <input type="number" id="rounds" name="rounds" min="1" max="20" value="10">
 </div>
 <div id="botResponses"></div>
 <div class="loading-indicator" id="loading-indicator">Loading...</div>
 </div>
 <script>
 let conversationHistory = [];
 let currentBot = "user";
 let conversationRounds = 10;

 function generateBot1Prompt(conversation) {
 var systemMessage = "You are a highly intelligent assistant named bot1. You are engaged in a discussion with another assistant named bot2. Your goal is to provide the most accurate, insightful, and informative responses. You should also address the points made by bot2 in your response. Your response should not be more than 8192 tokens.";
 return [{"role": "system", "content": systemMessage}].concat(conversation);
 }

 function generateBot2Prompt(conversation) {
 var systemMessage = "You are a critical thinker assistant named bot2. You are engaged in a discussion with another assistant named bot1. Your goal is to provide thoughtful, well-reasoned, and informative responses. You should also address the points made by bot1 in your response. Your response should not be more than 8192 tokens.";
 return [{"role": "system", "content": systemMessage}].concat(conversation);
 }

 async function getAssistantResponse(messages) {
 var url = "https://api.fireworks.ai/inference/v1/chat/completions";
 var model = (currentBot === "bot1") ? "accounts/fireworks/models/qwen2-72b-instruct" : "accounts/fireworks/models/llama-v3-70b-instruct";
 var payload = {
 "model": model,
 "messages": messages
 };
 var headers = {
 "Authorization": "Bearer moIHUdyg3k6SNmc9hLjmDtI6OvI2vatseMoNP9fmByvcQiGM",
 "Content-Type": "application/json"
 };
 try {
 var response = await fetch(url, {
 method: 'POST',
 headers: headers,
 body: JSON.stringify(payload)
 });
 if (!response.ok) {
 throw new Error(`HTTP error! status: ${response.status}`);
 }
 var data = await response.json();
 return data.choices[0].message.content;
 } catch (error) {
 console.error(error);
 return "An error occurred while fetching the response.";
 }
 }

 function textToSpeech(text, lang) {
 var utterance = new SpeechSynthesisUtterance();
 utterance.text = text;
 utterance.lang = lang;
 speechSynthesis.speak(utterance);
 }

 async function alternateConversation() {
 for (var i = 0; i < conversationRounds; i++) {
 if (currentBot === "bot1") {
 var prompt = generateBot1Prompt(conversationHistory);
 var botResponse = await getAssistantResponse(prompt);
 conversationHistory.push({"role": "assistant", "content": botResponse});
 setTimeout(() => {
 document.getElementById('botResponses').innerHTML += `<div class="bot-response bot1-response"><p>${botResponse}</p></div>`;
 textToSpeech(botResponse, 'en');
 }, (i * 2000) + 2000); // 2-second delay after each response
 currentBot = "bot2";
 } else {
 var prompt = generateBot2Prompt(conversationHistory);
 var botResponse = await getAssistantResponse(prompt);
 conversationHistory.push({"role": "assistant", "content": botResponse);
 setTimeout(() => {
 document.getElementById('botResponses').innerHTML += `<div class="bot-response bot2-response"><p>${botResponse}</p></div>`;
 textToSpeech(botResponse, 'en');
 }, (i * 2000) + 2000); // 2-second delay after each response
 currentBot = "bot1";
 }
 }
 document.getElementById('loading-indicator').style.display = 'none';
 }

 async function askQuestion() {
 var question = document.getElementById('question').value;
 conversationRounds = parseInt(document.getElementById('rounds').value);

 if (!question) {
 alert("Please enter a question.");
 return;
 }

 document.getElementById('loading-indicator').style.display = 'block';
 conversationHistory.push({"role": "user", "content": question);

 var prompt = generateBot1Prompt(conversationHistory);
 var bot1Response = await getAssistantResponse(prompt);
 conversationHistory.push({"role": "assistant", "content": bot1Response);
 document.getElementById('botResponses').innerHTML += `<div class="bot-response bot1-response"><p>${bot1Response}</p></div>`;
 textToSpeech(bot1Response, 'en');

 conversationHistory.push({"role": "user", "content": bot1Response);
 prompt = generateBot2Prompt(conversationHistory);
 var bot2Response = await getAssistantResponse(prompt);
 conversationHistory.push({"role": "assistant", "content": bot2Response);
 document.getElementById('botResponses').innerHTML += `<div class="bot-response bot2-response"><p>${bot2Response}</p></div>`;
 textToSpeech(bot2Response, 'en');

 await alternateConversation();
 document.getElementById('loading-indicator').style.display = 'none';
 }
 </script>
</body>
</html>